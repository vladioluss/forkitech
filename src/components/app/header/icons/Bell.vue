<script setup lang="ts">
import BellIndicator from "@/components/app/header/icons/BellIndicator.vue";
import {ref} from "vue";


const active = ref<boolean>(true)

const toggleBellAnimation = () => {
  active.value = !active.value;
}
</script>

<template>
  <div
      @click="active = false"
      :class="{
        'disable-animation': !toggleBellAnimation,
        'notification-box': toggleBellAnimation
      }"
  >
    <svg class="bell"
         xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 27 27" fill="none">
      <g id="Icons/Notification-Bell">
        <path id="notification-bell" fill-rule="evenodd" clip-rule="evenodd"
              d="M6.60742 3.70126C7.77891 3.05354 9.26898 3.401 10.0103 4.47115L10.0956 4.60302L10.7393 5.67098L10.8403 5.66333C12.9843 5.53749 15.0617 6.49113 16.2965 8.20069L16.4302 8.39374L16.5698 8.61425C17.7813 10.6238 19.1192 12.2689 20.4945 13.1813C21.1498 13.6173 21.6386 13.7787 21.8922 13.7928C22.2744 13.7596 22.619 13.9871 22.7418 14.3472C22.8545 14.6802 22.7184 15.0441 22.4293 15.2488L22.3468 15.3005L18.6194 17.3621L18.6736 17.4741C19.2988 18.8714 18.8297 20.5106 17.5501 21.4002L17.4045 21.4959L17.2525 21.5851C15.8114 22.3822 14.0056 22.045 12.9661 20.8577L12.8538 20.7223L12.7644 20.6008L9.02525 22.671C8.74961 22.8229 8.41185 22.8162 8.15412 22.6611L8.0615 22.5961L7.98593 22.5257C7.72164 22.2432 7.68786 21.8355 7.8973 21.5546C8.02502 21.3133 8.12242 20.8332 8.05715 20.0749C7.91995 18.4803 7.10277 16.5496 5.89251 14.5389C4.70451 12.5684 4.81017 10.1484 6.09163 8.29169L6.14277 8.21965L5.50399 7.16049C4.84845 6.07154 5.15864 4.69806 6.1756 3.96167L6.30639 3.87301L6.4391 3.79431L6.60742 3.70126ZM8.97279 7.84428C6.82553 9.03139 6.09023 11.6697 7.32926 13.7272C8.82035 16.2022 9.63001 18.3604 9.73118 20.1471L9.737 20.2589L9.74014 20.4154L19.9574 14.7634L19.7299 14.6282C18.2457 13.7001 16.7772 12.0746 15.3564 9.79417L15.1331 9.42944C13.8895 7.36557 11.125 6.65308 8.97279 7.84428ZM17.1656 18.1677L14.2208 19.7961L14.2542 19.8364C14.7556 20.3886 15.5931 20.5663 16.296 20.2502L16.4193 20.1882L16.5335 20.1197C17.1802 19.6987 17.4379 18.9168 17.1904 18.228L17.1656 18.1677ZM7.52696 5.05997L7.43344 5.10497L7.26636 5.19696C6.87385 5.41396 6.72199 5.8741 6.89652 6.26036L6.94263 6.34804L7.32605 6.98456L7.36689 6.95227C7.52913 6.8272 7.69875 6.70967 7.87534 6.60008L8.14541 6.44169C8.41948 6.28997 8.70327 6.15964 8.99492 6.05104L9.03138 6.03754L8.65686 5.41704C8.44708 5.06799 8.01287 4.91401 7.62327 5.02631L7.52696 5.05997Z"
              fill="white"/>
      </g>
    </svg>
    <BellIndicator
        v-if="active"
        class="indicator"
    />
  </div>
</template>

<style scoped lang="scss">
.indicator,
.bell {
  cursor: pointer;
}

.indicator {
  position: relative;
  bottom: 32px;
  left: 12px;
  animation: zoom 3s 3s both infinite;
}

.notification-box {
  height: 27px;
  width: 27px;
}

.bell {
  animation: bell 1s 1s both infinite;
}

@keyframes bell {
  0% {
    transform: rotate(0);
  }
  10% {
    transform: rotate(30deg);
  }
  20% {
    transform: rotate(0);
  }
  80% {
    transform: rotate(0);
  }
  90% {
    transform: rotate(-30deg);
  }
  100% {
    transform: rotate(0);
  }
}

@keyframes zoom {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  10% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 1;
  }
  51% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

.disable-animation {
  animation: none;
}
</style>